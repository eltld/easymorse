<div class='pinchComponent'>
	<div id='p3Image' class='pinchImage'></div>
</div>
<script>
$('#p3Image').css('background','url("images/p3a.jpg")');

$('#p3Image').on('touchstart touchmove touchend',function(e) {
	e.preventDefault();
	
	var obj=$('#p3Image')[0];
	
// 	if(obj.gesture){
// 		console.log('obj gesture true---> do not touch action.');
// 		e.stopPropagation();
// 		return;
// 	}

	if(e.originalEvent.touches && e.originalEvent.touches.length>1){
		console.log('touch more that one.');
		return;
	}
});

$('#p3Image').on('gesturestart gesturechange gestureend',function(e){
	e.preventDefault();
	e.stopPropagation();
	
	if(e.type=='gesturestart'){
// 		var obj=$('#p3Image')[0];
// 		obj.gesture=true;
	}
	
	if(e.type=='gesturechange'){
		console.log('gesture rotation:'+e.originalEvent.rotation);
		$('#p3Image').parent().css('-webkit-transform','scale('+e.originalEvent.scale*0.4+') '+
				'rotate('+e.originalEvent.rotation+'deg)');
		//$('#p3Image').parent().css('-webkit-transform','rotate('+e.originalEvent.rotation+'deg)');
		//$('#p3Image').parent().css('-webkit-transform-origin','50% 50%');
	}
	
	if(e.type=='gestureend'){
// 		$('#p3Image').delay(700).queue(function(){
// 			var obj=$('#p3Image')[0];
// 			obj.gesture=false;
// 			console.log('end: set obj gesture false');
// 		});
		
	}
});
</script>